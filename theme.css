/* EliteTraining — theme.css (extrait depuis l'ancien <style> de index.html) */

    :root{
      --bg:#0b0f17; --card:#121a29; --muted:#9fb0c7; --text:#eaf1ff;
      --accent:#4ea1ff; --accent2:#00d4ff; --danger:#ff4e6a;
      --btn:#1a2740; --btn2:#223454;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 20px;
      --safe-top: env(safe-area-inset-top);
      --safe-bot: env(safe-area-inset-bottom);
    }
    [data-theme="light"]{
      --bg:#f5f7fb; --card:#ffffff; --muted:#4f6076; --text:#0b1526;
      --accent:#1976ff; --accent2:#0aa3c2;
      --btn:#e9eef9; --btn2:#dde7fb;
      --shadow: 0 10px 30px rgba(10,20,40,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-tap-highlight-color: transparent;
      /* Safe-area top is handled by the sticky topbar so it stays clear of the
         notch/status bar while scrolling (and avoids double-padding). */
      padding-top: 0;
      padding-bottom: var(--safe-bot);
      overscroll-behavior: none;
      touch-action: manipulation;
    }
    a{color:inherit}
    .app{max-width:520px;margin:0 auto; padding:14px 14px 20px}
    body.inWorkout .app{ padding-top:8px; padding-bottom:0; }
    /* Safe-area for workout screen (topbar hidden) */
    body.inWorkout{ padding-top: var(--safe-top); }


    /* Global iOS-like topbar (logo + title + user + logout)
       - Sticky at the top
       - Adds safe-area padding so it never goes under the notch/status bar */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      position: relative;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      margin: 0 0 12px;
      padding: calc(10px + var(--safe-top)) 12px 10px;
      border-radius: 22px;
      background: rgba(18,26,41,.72);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }
    .topbar::after{
      content:"";
      position:absolute;
      left:12px; right:12px;
      bottom:-0.5px;
      height:0.5px;
      background: rgba(255,255,255,.10);
      pointer-events:none;
    }
    [data-theme="light"] .topbar{
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(10,20,40,.10);
      box-shadow: 0 10px 22px rgba(10,20,40,.10);
    }

    .brandWrap{
      display:flex;
      align-items:center;
      gap:14px;
      min-width: 0;
    }
    .appLogo{
      width:42px;
      height:42px;
      border-radius: 14px;
      box-shadow: 0 10px 18px rgba(0,0,0,.25);
      flex: 0 0 auto;
    }

    .brand{
      display:flex; flex-direction:column; gap:2px;
    }
    .brand .title{font-size:18px; font-weight:800; letter-spacing:.2px}
    .brand .sub{font-size:12px; color:var(--muted)}

    .coachSwitch{ display:flex; align-items:center; gap:10px; margin-right:10px; }
    .coachLabel{ font-size:13px; color:var(--text); opacity:.9; }
    .switch{ position:relative; display:inline-block; width:46px; height:26px; }
    .switch input{ opacity:0; width:0; height:0; }
    .slider{ position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0;
      background: rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.14);
      transition:.2s; border-radius:999px; }
    .slider:before{ position:absolute; content:""; height:20px; width:20px; left:3px; top:50%;
      transform:translateY(-50%); background: rgba(255,255,255,.92); transition:.2s; border-radius:999px; }
    .switch input:checked + .slider{ background: rgba(59,130,246,.55); border-color: rgba(59,130,246,.65); }
    .switch input:checked + .slider:before{ transform:translate(20px,-50%); }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px;
      background:var(--card); box-shadow: var(--shadow);
      font-size:13px; color:var(--muted);
    }
    .pill button{
      border:0; background:transparent; color:var(--text);
      font-size:14px; font-weight:700;
    }

    .card{
      background:var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:14px;
    }
    .stack{display:flex; flex-direction:column; gap:12px}
    .row{display:flex; gap:10px; align-items:center}
    .grow{flex:1}
    .muted{color:var(--muted)}
    .h1{font-size:22px; font-weight:900; margin:0 0 4px}
    .h2{font-size:16px; font-weight:900; margin:0}
    .small{font-size:12px}
    .btn{
      border:0; border-radius: 16px;
      background:var(--btn);
      color:var(--text);
      padding:12px 14px;
      font-weight:800;
      box-shadow: var(--shadow);
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
    }
    .btn:active{transform: translateY(1px)}
    .btn.primary{background: linear-gradient(135deg, var(--accent), var(--accent2)); color:#061224}
    .btn.danger{background:var(--danger)}
    .btn.secondary{background:var(--btn2)}
    .btn.wide{width:100%}
    .btn.icon{width:54px; height:54px; padding:0; border-radius:18px}
    .btn.icon.big{width:64px; height:64px; border-radius:22px}

    .grid{display:grid; grid-template-columns:1fr; gap:12px}
    .sessionItem{display:flex; gap:14px; align-items:center}
    .badge{
      font-size:12px; color:var(--muted);
      background: rgba(255,255,255,.06);
      padding:6px 10px; border-radius:999px;
    }
    [data-theme="light"] .badge{background: rgba(10,20,40,.06)}

    .screen{display:none}
    .screen.active{display:block}

    .loginBox{margin-top:14px}
    input{
      width:100%;
      border:0; outline:none;
      background:var(--btn2);
      color:var(--text);
      padding:12px 14px;
      border-radius:16px;
      font-size:15px;
    }

    .timerBox{
      display:flex; flex-direction:column; gap:10px;
      align-items:center; justify-content:center;
      padding: 14px;
    }
    .phase{
      font-weight:900; letter-spacing:.3px;
      padding:8px 12px; border-radius:999px;
      background: rgba(255,255,255,.08);
      color: var(--text);
      font-size:12px;
    }
    [data-theme="light"] .phase{background: rgba(10,20,40,.06)}
    .time{
      font-variant-numeric: tabular-nums;
      font-size: 62px;
      font-weight: 950;
      line-height: 1;
      margin: 2px 0 0;
    }
    .subline{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}

    /* Next exercise overlay (inside GIF card) */
    .nextOverlay{
      position:absolute;
      inset:0;
      display:none;
      z-index: 6;
      overflow:hidden;
      border-radius: 22px;
    }
    .nextOverlay.active{display:block}
    .nextOverlay .nextBg{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      filter: grayscale(1) brightness(.55) contrast(.95);
      transform: scale(1);
    }
    .nextOverlay::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(ellipse at center, rgba(0,0,0,.10), rgba(0,0,0,.40));
      pointer-events:none;
    }
    .nextOverlay .nextText{
      position:absolute;
      left:50%;
      top:50%;
      transform: translate(-50%,-50%);
      width: min(86%, 520px);
      padding: 18px 18px 16px;
      border-radius: 24px;
      background: rgba(10,18,30,.70);
      border: 1px solid rgba(120,200,255,.35);
      box-shadow: 0 16px 40px rgba(0,0,0,.45);
      text-align:center;
      backdrop-filter: blur(6px);
    }
    .nextOverlay .nextTag{
      font-weight:950;
      letter-spacing:.28em;
      font-size:12px;
      color: rgba(140,215,255,.95);
      margin-bottom: 10px;
    }
    .nextOverlay .nextName{
      font-size:20px;
      font-weight:950;
      letter-spacing:-.2px;
      line-height:1.05;
    }
    .nextOverlay .nextLast{
      margin-top: 10px;
      font-size:18px;
      font-weight:850;
      color: rgba(255,255,255,.88);
    }
    .nextOverlay .nextLast:empty{ display:none; }

    /* Workout redesign */
    .srOnly{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }
    body.inWorkout .topbar{ display:none; }

    /* ✅ IMPORTANT: plus de double safe-top ici */
    #screenWorkout{ gap:5px; padding-top: 0; padding-bottom: calc(104px + var(--safe-bot)); }

    .workoutHeader{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px; padding: 4px 2px;
    }
    .workoutBack{ width:48px; height:48px; border-radius:16px; }
    /* iOS-like chevron back icon */
    .chevronLeft{
      position: relative;
      width: 14px;
      height: 24px;
      display:block;
    }
    .chevronLeft::before,
    .chevronLeft::after{
      content:"";
      position:absolute;
      left:6px;
      width:4px;
      height:16px;
      background: currentColor;
      border-radius:4px;
    }
    .chevronLeft::before{
      top:0;
      transform: rotate(45deg);
    }
    .chevronLeft::after{
      bottom:0;
      transform: rotate(-45deg);
    }
    /* Center the chevron in the square button */
    .workoutBack{
      display:flex;
      align-items:center;
      justify-content:center;
      padding:0;
    }

    .workoutHeaderCenter{ flex:1; text-align:center; line-height:1.05; }
    .workoutTitle{ font-size:26px; font-weight:950; letter-spacing:-.3px; }
    .workoutSub{ margin-top:4px; font-size:14px; color:var(--muted); }
    .workoutHeaderRight{ width:56px; display:flex; justify-content:flex-end; }

    .workoutChips{ display:flex; justify-content:center; gap:8px; margin-top:2px; margin-bottom:0; }
    .chip{
      padding:8px 12px; border-radius:999px;
      background: rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.10);
      color:var(--text); font-size:13px;
    }
    [data-theme="light"] .chip{ background: rgba(10,20,40,.06); border-color: rgba(10,20,40,.10); }
    .chipPhase{ color: #bfe3ff; border-color: rgba(120,210,255,.35); }
    .chipCoach{ color: #bfffd0; border-color: rgba(90,240,140,.35); }
    .chipSoft{ opacity:.95; }

    .cardTight{ padding:10px; border-radius: 24px; }
    .previewCard{
      position:relative;
      border-radius:22px;
      overflow:hidden;
      background: rgba(0,0,0,.15);
      border:1px solid rgba(255,255,255,.08);
    }
    [data-theme="light"] .previewCard{ background: rgba(10,20,40,.04); border-color: rgba(10,20,40,.10); }
    .previewCard img{ width:100%; height: min(280px, 34vh); object-fit:contain; background:#fff; display:block; }

    .infoBtn{
      position:absolute; right:10px; bottom:10px;
      width:38px; height:38px; border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      color:#fff; font-weight:900; font-size:16px;
      display:flex; align-items:flex-start; justify-content:center;
    }
    .infoBtn:active{ transform: scale(.98); }

    .loadBadge{
      position:absolute;
      left:10px;
      bottom:10px;
      z-index:7;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.40);
      color:#fff;
      font-weight:900;
      font-size:14px;
      letter-spacing:-.2px;
      backdrop-filter: blur(6px);
    }
    .loadBadge.hidden{ display:none; }

    .setDots{display:flex; gap:10px; align-items:center; padding: 0; pointer-events:none;}
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: rgba(255,255,255,.20);
      border:1px solid rgba(255,255,255,.10);
    }
    .dot.current{ background: rgba(80,170,255,.95); border-color: rgba(80,170,255,.65); }
    .dot.done{ background: rgba(80,240,140,.95); border-color: rgba(80,240,140,.55); }

    .infoOverlay{
      position:absolute; inset:0;
      background: rgba(0,0,0,.70);
      display:none;
      padding: 12px;
    }
    .infoOverlay.active{ display:flex; }
    .infoInner{
      width:100%;
      border-radius:20px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(15,20,30,.85);
      padding: 10px;
      display:flex; flex-direction:column;
      gap:8px;
    }
    .infoHdr{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .infoTitle{ font-size:14px; font-weight:950; }
    .infoBody{ color: rgba(255,255,255,.92); font-size:13px; line-height:1.3; white-space:pre-line; }
    .infoClose{ padding: 8px 12px; border-radius: 14px; }

    /* Load input + history in overlay */
    .loadBox{
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid rgba(255,255,255,.10);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .loadRow{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .loadInput{
      flex:1;
      width:auto;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      padding:10px 12px;
      border-radius:14px;
      color: var(--text);
      font-size:14px;
    }
    .loadBtn{ padding:10px 12px; border-radius:14px; font-weight:900; }
    .loadHist{ display:flex; flex-wrap:wrap; gap:8px; }
    .loadChip{
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.92);
      font-size:13px;
      font-weight:850;
    }
    .loadChip:active{ transform: scale(.98); }

    .todoCard{}
    .todoHdr{ display:flex; align-items:center; justify-content:space-between; }
    .todoLabel{ font-size:16px; font-weight:950; }
    .todoMain{ margin-top:6px; font-size:32px; font-weight:950; letter-spacing:-.35px; }
    .todoDesc{ margin-top:4px; font-size:13px; }
    .todoChips{ margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; }

    .timerCard .timerBox{ padding: 8px 4px; }
    .timerBoxFlat{ background: transparent; box-shadow:none; padding: 8px 4px; }
    .timerBoxFlat .time{ font-size:56px; } /* ✅ plus petit */
    .timerBoxFlat .subline{ text-align:center; margin-top: 4px; }

    .btnbar{
      position: sticky;
      bottom: 0;
      padding: 12px 0 calc(12px + var(--safe-bot));
      background: linear-gradient(180deg, rgba(0,0,0,0), var(--bg) 42%);
      display:flex; justify-content:center; gap:14px;
    }

    /* Simplified bottom controls (fixed) */
    body.inWorkout .btnbar{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 80;
      gap: 14px;
      padding: 16px 16px calc(16px + var(--safe-bot));
      background: linear-gradient(180deg, rgba(0,0,0,0), var(--bg) 42%);
    }
    body.inWorkout .btnbar .ctrlBtn{
      flex: 1;
      height: 56px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,0.06);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 18px;
      color: rgba(255,255,255,.92);
      box-shadow: 0 10px 26px rgba(0,0,0,.22);
    }
    body.inWorkout .btnbar .ctrlBtn:active{ transform: scale(.97); }
    body.inWorkout .btnbar .ctrlBtn.primary{
      background: linear-gradient(180deg, rgba(22,92,140,.55), rgba(10,42,64,.72));
      border-color: rgba(120,200,255,.18);
    }
    body.inWorkout .btnbar #btnPrev,
    body.inWorkout .btnbar #btnNext{
      font-weight: 800;
      letter-spacing: -4px;
    }

    /* --- Workout: bordures + spacing 5px + largeur cohérente --- */
    body.inWorkout .card.cardTight{ width:100%; margin:0 0 5px 0; }
    body.inWorkout .timerCard{ margin-bottom:0 !important; }
    body.inWorkout .previewCard,
    body.inWorkout .todoCard,
    body.inWorkout .timerCard{
      border: 1px solid rgba(255,255,255,.10);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.03),
        0 10px 28px rgba(0,0,0,.35);
    }
    [data-theme="light"] body.inWorkout .previewCard,
    [data-theme="light"] body.inWorkout .todoCard,
    [data-theme="light"] body.inWorkout .timerCard{
      border-color: rgba(10,20,40,.10);
      box-shadow:
        inset 0 0 0 1px rgba(10,20,40,.03),
        0 10px 28px rgba(10,20,40,.12);
    }
    body.inWorkout #screenWorkout{ padding-top: 0 !important; }

  
    /* Settings modal */
    .modal.hidden{display:none}
    .modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.45);
      display:flex; align-items:flex-start; justify-content:center;
      padding: calc(var(--safe-top) + 12px) 14px calc(var(--safe-bot) + 14px);
      z-index: 9999;
    }
    .modal-content{
      width:min(520px, 100%);
      background: var(--card);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding: 14px 14px 10px;
      border: 1px solid rgba(255,255,255,.06);

      /* UX iPhone: permettre le scroll dans les modals longs */
      max-height: calc(100dvh - var(--safe-top) - var(--safe-bot) - 28px);
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* Custom modals (éditeur séance, picker, etc.) */
    .modalCard{
      width:min(560px, 100%);
      background: var(--card);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding: 14px 14px 10px;
      border: 1px solid rgba(255,255,255,.06);

      /* structure: header/footer fixes, body scroll */
      max-height: calc(100dvh - var(--safe-top) - var(--safe-bot) - 28px);
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }
    .modalHeader{ flex:0 0 auto; }
    .modalFooter{ flex:0 0 auto; padding-top: 10px; }
    .modalBody{
      flex:1 1 auto;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding-right: 2px; /* évite que la scrollbar cache le contenu */
    }

    .modal-header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .setting-row{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px;
      padding: 12px 6px;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .icon-btn{
      display:inline-flex; align-items:center; justify-content:center;
      width:42px; height:42px;
      border-radius: 14px;
      border: 0;
      background: var(--btn);
      color: var(--text);
      box-shadow: none;
      font-size: 18px;
    }


    /* ===== Historique ===== */
    .historyFilters{
      display:flex;
      gap:8px;
      overflow:auto;
      padding-bottom: 6px;
      -webkit-overflow-scrolling: touch;
    }
    .hchip{
      border: 1px solid rgba(255,255,255,.14);
      background: transparent;
      color: inherit;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 16px;
      white-space: nowrap;
      opacity: .85;
    }
    [data-theme="light"] .hchip{
      border-color: rgba(10,20,40,.14);
    }
    .hchip.active{
      opacity: 1;
      border-color: rgba(255,255,255,.35);
    }
    [data-theme="light"] .hchip.active{
      border-color: rgba(10,20,40,.28);
    }

    .kpiGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .kpiCard{
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      padding: 12px;
      background: rgba(255,255,255,.04);
    }
    [data-theme="light"] .kpiCard{
      border-color: rgba(10,20,40,.10);
      background: rgba(10,20,40,.03);
    }
    .kpiLabel{ font-size: 13px; opacity:.75; }
    .kpiValue{ font-size: 24px; font-weight: 900; margin-top: 6px; letter-spacing:-.2px; }
    .kpiSub{ font-size: 13px; opacity:.7; margin-top: 2px; }

    .charts{
      display:grid;
      gap:10px;
    }
    .chartCard{
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      padding: 12px;
      background: rgba(255,255,255,.04);
    }
    [data-theme="light"] .chartCard{
      border-color: rgba(10,20,40,.10);
      background: rgba(10,20,40,.03);
    }
    .chartTitle{ font-size: 13px; opacity:.8; margin-bottom: 8px; }

    .historyListHeader{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap:14px;
    }
    .dangerTextBtn{
      background: transparent;
      border: none;
      color: var(--danger);
      font-size: 13px;
      font-weight: 800;
      padding: 8px 10px;
      border-radius: 12px;
    }
    .dangerTextBtn:active{ transform: translateY(1px); }

    .historyList{
      display:flex;
      flex-direction: column;
      gap:10px;
    }
    .historyItem{
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      padding: 12px;
      background: rgba(255,255,255,.03);
    }
    [data-theme="light"] .historyItem{
      border-color: rgba(10,20,40,.10);
      background: rgba(10,20,40,.02);
    }
    .historyItemTop{
      display:flex;
      justify-content: space-between;
      gap:10px;
      align-items: baseline;
    }
    .historyName{ font-weight: 950; letter-spacing:-.2px; }
    .historyMeta{ opacity: .75; font-size: 13px; }
    .historyLine{ margin-top: 6px; opacity: .90; font-size: 13px; }


    .finishBar{ margin-top: 10px; }
    /* Slide sections on home */
    .homeSection{
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transform: translateY(-4px);
      transition: max-height 260ms ease, opacity 220ms ease, transform 220ms ease;
    }
    .homeSection.open{
      opacity: 1;
      transform: translateY(0);
    }

    .historyDelBtn{
      background: transparent;
      border: none;
      color: var(--danger);
      font-size: 16px;
      font-weight: 900;
      padding: 6px 10px;
      border-radius: 12px;
    }
    .historyDelBtn:active{ transform: translateY(1px); }
    /* Icones (sans emojis) */
    .icoHistory{
      width: 18px;
      height: 18px;
      display:inline-block;
      position: relative;
      margin-right: 10px;
      border: 2px solid currentColor;
      border-radius: 6px;
      opacity: .9;
      flex: 0 0 auto;
    }
    .icoHistory::before{
      content:"";
      position:absolute;
      left:4px; right:4px; top:4px; bottom:4px;
      border-top: 2px solid currentColor;
      border-bottom: 2px solid currentColor;
      opacity: .8;
    }
    .icoHistory::after{
      content:"";
      position:absolute;
      top:4px; bottom:4px;
      left:50%;
      width:0;
      border-left: 2px solid currentColor;
      transform: translateX(-1px);
      opacity: .8;
    }



    /* ===== TROPHÉES ===== */
    .trophySection{
      margin-top: 12px;
      padding: 12px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    [data-theme="light"] .trophySection{
      border-color: rgba(10,20,40,.10);
      background: rgba(10,20,40,.03);
    }
    .trophyHdr{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 10px;
    }
    .trophyHdr .trophyTitle{
      font-size: 14px;
      font-weight: 950;
      margin: 0;
      letter-spacing: .2px;
      opacity: .92;
    }
    .trophyHdr .trophyCount{
      font-size: 12px;
      opacity: .75;
      font-weight: 800;
      white-space: nowrap;
    }
    .trophyGrid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:10px;
    }
    .trophyBadge{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      padding:10px 8px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      user-select:none;
    }
    [data-theme="light"] .trophyBadge{
      border-color: rgba(10,20,40,.10);
      background: rgba(10,20,40,.02);
    }
    .trophyBadge img{
      width: 56px;
      height: 56px;
      object-fit: contain;
      display:block;
    }
    .trophyBadge .trophyLbl{
      font-size: 11px;
      line-height: 1.1;
      text-align:center;
      opacity:.92;
    }
    .trophyBadge.locked{ opacity:.45; }
    .trophyBadge.locked img{ filter: grayscale(1); }

    /* ===== POPUP TROPHÉE (persistante) ===== */
    .trophyModal.hidden{ display:none; }
    .trophyModal{
      position:fixed;
      inset:0;
      z-index: 10000;
      background: rgba(0,0,0,.55);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: calc(var(--safe-top) + 16px) 16px calc(var(--safe-bot) + 16px);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }
    .trophyModalCard{
      width: min(460px, 100%);
      border-radius: 26px;
      background: rgba(18,26,41,.96);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 18px 60px rgba(0,0,0,.50);
      padding: 16px 16px 14px;
      position: relative;
    }
    [data-theme="light"] .trophyModalCard{
      background: rgba(255,255,255,.96);
      border-color: rgba(10,20,40,.14);
      box-shadow: 0 18px 60px rgba(10,20,40,.20);
    }
    .trophyModalClose{
      position:absolute;
      top: 10px;
      right: 10px;
      width: 40px;
      height: 40px;
      border-radius: 14px;
      border: 0;
      background: rgba(255,255,255,.10);
      color: var(--text);
      font-weight: 950;
      font-size: 18px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    [data-theme="light"] .trophyModalClose{ background: rgba(10,20,40,.06); }
    .trophyModalTop{
      display:flex;
      gap:14px;
      align-items:center;
      padding-right: 44px;
    }
    .trophyModalTop img{
      width: 78px;
      height: 78px;
      object-fit: contain;
      flex: 0 0 auto;
    }
    .trophyModalTxt{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:0;
    }
    .trophyModalTxt .mini{
      font-size: 12px;
      opacity: .75;
      font-weight: 850;
      letter-spacing: .2px;
    }
    .trophyModalTxt .big{
      font-size: 18px;
      font-weight: 950;
      letter-spacing: -.2px;
      line-height: 1.05;
    }
    .trophyModalTxt .desc{
      margin-top: 4px;
      font-size: 13px;
      opacity: .88;
      line-height: 1.35;
      white-space: pre-line;
    }
    .trophyModalActions{
      display:flex;
      justify-content:flex-end;
      gap:10px;
      margin-top: 14px;
    }
    .trophyModalActions .btn{ box-shadow:none; }
    .trophyModalActions .btn.secondary{ background: rgba(255,255,255,.08); }


    /* ===== TROPHY MODAL LARGE IMAGE ===== */
    .trophyModalTop{
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding-right: 0;
    }
    .trophyModalTop img{
      width: 140px;
      height: 140px;
      margin-bottom: 8px;
    }
    .trophyModalTxt{
      align-items: center;
    }
    .trophyModalTxt .big{
      font-size: 20px;
    }
    .trophyModalTxt .desc{
      font-size: 14px;
    }


    /* ===== AUTH (Login/Signup) ===== */
    .authTabs{ display:flex; gap:10px; margin-top:12px; }
    .authTab{
      flex:1;
      padding:10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight: 700;
    }
    .authTab.active{
      background: linear-gradient(180deg, rgba(74,161,255,.30), rgba(74,161,255,.10));
      border-color: rgba(74,161,255,.35);
    }

/* =========================
   B2.0-2-SAFE — Custom session editor styles
========================= */
.csList{ display:flex; flex-direction:column; gap:8px; margin:8px 0; }
.csRow{ display:flex; gap:8px; align-items:center; }
.csRow .input{ flex: 1; }
.csRow .mini{ width: 92px; }
.csRow .danger{ min-width:44px; }

/* B2.0-2-SAFE: le modal custom doit passer AU-DESSUS des réglages */
#customSessionModal { 
  z-index: 99999 !important; 
}
#customSessionModal .backdrop,
#customSessionModal::before {
  z-index: 99998 !important;
}

/* =========================
   IA V2 — styles
========================= */
.aiCard{
  margin-bottom: 12px;
  padding: 12px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
}
[data-theme="light"] .aiCard{
  border-color: rgba(10,20,40,.12);
  background: rgba(10,20,40,.03);
}

.aiMetaRow{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
}
.aiChips{ display:flex; gap:8px; flex-wrap:wrap; }
.aiChip{
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 850;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  opacity:.92;
}
[data-theme="light"] .aiChip{
  border-color: rgba(10,20,40,.14);
  background: rgba(10,20,40,.04);
}

.aiLoader{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
}
[data-theme="light"] .aiLoader{
  border-color: rgba(10,20,40,.12);
  background: rgba(10,20,40,.03);
}
.spinner{
  width:18px; height:18px;
  border-radius:999px;
  border: 2px solid rgba(255,255,255,.18);
  border-top-color: rgba(255,255,255,.85);
  animation: spin 0.9s linear infinite;
}
[data-theme="light"] .spinner{
  border-color: rgba(10,20,40,.16);
  border-top-color: rgba(10,20,40,.70);
}
@keyframes spin{ to{ transform: rotate(360deg); } }

.aiPreview{
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid rgba(255,255,255,.08);
}
[data-theme="light"] .aiPreview{
  border-top-color: rgba(10,20,40,.10);
}
.aiPreviewCols{ display:flex; flex-direction:column; gap:10px; }
.aiBlock{
  padding: 10px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
}
[data-theme="light"] .aiBlock{
  border-color: rgba(10,20,40,.12);
  background: rgba(10,20,40,.025);
}
.aiList{ display:flex; flex-direction:column; gap:8px; margin-top:8px; }
.aiRow{
  display:flex;
  gap:10px;
  align-items:center;
  padding: 8px 10px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.02);
}
[data-theme="light"] .aiRow{
  border-color: rgba(10,20,40,.10);
  background: rgba(10,20,40,.02);
}
.aiRow img{
  width:34px; height:34px;
  border-radius: 12px;
  object-fit: cover;
  background: rgba(255,255,255,.06);
}
.aiRow .t1{ font-weight: 900; font-size: 14px; line-height: 1.2; }
.aiRow .t2{ font-size: 12px; opacity: .78; margin-top:2px; }

/* =========================
   IA Textarea Premium
========================= */

.aiTextarea{
  width:100%;
  min-height:110px;
  resize:none;

  padding:16px 18px;

  border-radius:18px;
  border:1px solid rgba(255,255,255,0.10);

  background:rgba(255,255,255,0.04);
  color:var(--text);

  font-size:16px;
  font-weight:500;
  line-height:1.4;

  transition:all 0.2s ease;
  box-sizing:border-box;
}

.aiTextarea::placeholder{
  color:rgba(255,255,255,0.35);
  font-weight:500;
}

.aiTextarea:focus{
  outline:none;
  border-color:rgba(0,180,255,0.7);
  box-shadow:0 0 0 3px rgba(0,180,255,0.15);
  background:rgba(255,255,255,0.06);
}

/* Light mode */
[data-theme="light"] .aiTextarea{
  border:1px solid rgba(10,20,40,0.12);
  background:rgba(10,20,40,0.03);
  color:var(--text);
}

[data-theme="light"] .aiTextarea::placeholder{
  color:rgba(10,20,40,0.35);
}

[data-theme="light"] .aiTextarea:focus{
  border-color:rgba(0,120,255,0.7);
  box-shadow:0 0 0 3px rgba(0,120,255,0.15);
}

/* =========================
   App Toast Premium
========================= */

.appToast{
  position:fixed;
  left:50%;
  bottom:24px;
  transform:translateX(-50%) translateY(20px);
  opacity:0;

  padding:14px 18px;
  border-radius:18px;

  background:rgba(20,30,50,0.95);
  backdrop-filter:blur(12px);

  border:1px solid rgba(255,255,255,0.12);

  color:white;
  font-weight:600;
  font-size:14px;

  box-shadow:0 10px 30px rgba(0,0,0,0.35);

  transition:all 0.25s ease;
  z-index:9999;
  pointer-events:none;
  text-align:center;
  max-width:90%;
}

.appToast.show{
  transform:translateX(-50%) translateY(0);
  opacity:1;
}

[data-theme="light"] .appToast{
  background:rgba(255,255,255,0.95);
  color:#0f172a;
  border:1px solid rgba(10,20,40,0.12);
}

/* =========================
   Play Icon Button
========================= */

.iconPlayBtn{
  width:48px;
  height:48px;
  border-radius:50%;

  border:none;
  cursor:pointer;

  display:flex;
  align-items:center;
  justify-content:center;

  font-size:18px;
  font-weight:900;
  color:white;

  background:linear-gradient(135deg,#4da8ff,#00c2ff);
  box-shadow:0 6px 18px rgba(0,140,255,0.35);

  transition:all 0.15s ease;
}

.iconPlayBtn:active{
  transform:scale(0.95);
  box-shadow:0 3px 10px rgba(0,140,255,0.25);
}

.iconPlayBtn:hover{
  filter:brightness(1.05);
}

/* =========================
   Play Button (SVG) + glow pulsant
========================= */
.playBtn{
  width:48px;
  height:48px;
  border-radius:999px;
  border:none;
  cursor:pointer;

  display:flex;
  align-items:center;
  justify-content:center;

  position:relative;
  flex:0 0 auto;

  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 10px 26px rgba(0, 170, 255, 0.28);
  -webkit-tap-highlight-color: transparent;

  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}

.playBtn:active{
  transform: scale(0.96);
  filter: brightness(1.03);
  box-shadow: 0 6px 18px rgba(0, 170, 255, 0.22);
}

.playIcon{
  width:22px;
  height:22px;
  fill: #ffffff;
  transform: translateX(1px); /* petit centrage optique du triangle */
  filter: drop-shadow(0 2px 8px rgba(0,0,0,.25));
}

/* Glow pulsant léger */
.playBtn::before{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:999px;
  background: radial-gradient(circle, rgba(0, 200, 255, 0.22), rgba(0, 200, 255, 0.0) 60%);
  opacity: 0;
  transform: scale(0.92);
  pointer-events:none;
}

@keyframes playPulse {
  0%   { opacity: 0.10; transform: scale(0.92); }
  45%  { opacity: 0.28; transform: scale(1.03); }
  100% { opacity: 0.10; transform: scale(0.92); }
}

@media (prefers-reduced-motion: no-preference){
  .playBtn::before{
    opacity: 0.18;
    animation: playPulse 1.8s ease-in-out infinite;
  }
}


/* IA: on masque le label durée à droite (doublon avec chips/aperçu) */
.aiMetaRight{display:none !important;}
